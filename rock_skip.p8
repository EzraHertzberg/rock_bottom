pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()
	rock_set()
end


function _update()
	rock_update()
	if btn(3) then
		rock_dive()
	end
	if btn(2)  and rock.y > 14*8 and rock.y < 16*8 then
		rock_skip()
	end
	if btn(4) and rock.sunk then
		rock_set()
	end
	if rock.y > 8 * 16 then
		rock_sink()
	end
end

function _draw()
	cls(0)
	camera(0, 0)
	map(1, 1, 0, 0)
	print(rock.x)
	camera(rock.x-40, 0)
	spr(rock.sprite, rock.x, rock.y, 1, 1)
	for i = 1, 100 do
		spr(5, 14 * i * 8, 4 + 14 * 8, 1, 1)
	end
	if rock.sunk then
		camera(0, 0)
		lose()
	end
end
-->8
gravity = 0.1
rock = {

	}

function rock_set()
	rock.sprite = 1
	rock.x = 0
	rock.y = 0
	rock.dx = 1
	rock.dy = 0
	rock.sunk = false
	rock.dived = false
end

function rock_skip()
	rock.dx = 2
	rock.dy = 3
	rock.dived = false
end

function rock_dive()
	if not rock.dived then 
		rock.dy = rock.dy - 2
		rock.dived = true
	end
end


function rock_update()
	if not rock.sunk then
		rock.dy = rock.dy - gravity
		rock.x = rock.x + rock.dx
		rock.y = rock.y - rock.dy
	end
end

function rock_sink()
	rock.sunk = true
	rock.sprite = 6
	rock.y = 8 * 13
end

-->8
function lose()
	print("your rock sank, press z\nto restart")
end 
__gfx__
00000000000000000000000000000000000000000000000000100100000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000
00700700006666000000000000000000000000000070000001100000000000000000000000000000000000000000000000000000000000000000000000000000
0007700006dddd600000000000000000000000000970000001101000000000000000000000000000000000000000000000000000000000000000000000000000
000770006dddddd60000000000000000000000000077000001101011000000000000000000000000000000000000000000000000000000000000000000000000
0070070006dddd600000000000000000000000000076770011100010000000000000000000000000000000000000000000000000000000000000000000000000
00000000006666000000000000000000000000000077667001101010000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000077770001101010000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000001001010000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000011101011000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000001101111000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000011110111000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000011111111000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000011111111000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000011111111000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbcccccccc1111111100000000000000000000000011111111000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
